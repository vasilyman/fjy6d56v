"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[321],{6321:(e,t,n)=>{n.r(t),n.d(t,{OrdersPage:()=>j});var r=n(7378),a=n(8922),i=n(2952),u=n(4174),l=n(9876),o=n(2157),c=n(6125),s=n(9969);var d=n(8944),m=n(1429),p=function(e){var t=e.items,n=e.value,a=e.name,i=e.onChange;return r.createElement("div",{className:"style-module_btn-group-P9zJF"},t.map((function(e){return r.createElement("div",{className:(0,d.Z)("style-module_btn-group__btn-PKugA",n===e.value&&"style-module_btn-group__btn_checked-HA2qw"),key:e.value},r.createElement("input",{id:"".concat(a,"-").concat(e.value),type:"radio",name:a,checked:n===e.value,value:e.value,className:"style-module_btn-group__input-VAygo",onChange:function(e){return i(e.target.value)},disabled:e.loading}),r.createElement("label",{htmlFor:"".concat(a,"-").concat(e.value),className:"style-module_btn-group__label-Ym55V"},e.title,e.loading&&r.createElement(m.J,{name:"spinner",className:"style-module_btn-group__icon-XZF4v"})))})))};var f,v=function(e){return e.Delivered="Delivered",e.InTransit="InTransit",e.OrderCancelled="OrderCancelled",e.Packaging="Packaging",e.PendingConfirmation="PendingConfirmation",e.Processing="Processing",e.ReturnRequested="ReturnRequested",e.WaitingForDelivery="WaitingForDelivery",e}({}),g=n(8537);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,u,l=[],o=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{if(!o&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var h,_,E=(0,l.Ps)(f||(h=["\n  mutation Patch($patchId: ID!, $input: OrderUpdateInput!) {\n    orders {\n      patch(id: $patchId, input: $input) {\n        id\n      }\n    }\n  }\n"],_||(_=h.slice(0)),f=Object.freeze(Object.defineProperties(h,{raw:{value:Object.freeze(_)}})))),O=function(e){var t=e.order,n=t.id,i=t.status,u=t.products,l=e.isLoading,o=(0,c.v9)(s.u.getAccess),d=y((0,g.D)(E,{context:{headers:{authorization:"Bearer ".concat(o)}},update:function(e){e.evict({fieldName:"orders"}),e.gc()}}),2),m=d[0],f=d[1].loading,b=(0,r.useMemo)((function(){return Object.entries(v).map((function(e){var t=y(e,2),n=t[0],r=t[1];return{title:n,value:r,loading:(f||l)&&r===i}}))}),[f,i,l]),h=(0,a.$G)().t;return r.createElement("div",{className:"style-module_item-mmvcU"},r.createElement("div",null,h("translation:orderNo"),": ",n),r.createElement("div",{className:"style-module_item__list-z7YHi"},u.map((function(e){return r.createElement("img",{key:"".concat(e.id,"-").concat(e.product.id),src:e.product.imgUrl,className:"style-module_item__img-Nku3O"})}))),r.createElement(p,{items:b,name:"order-status-".concat(n),value:i,onChange:function(e){m({variables:{patchId:n,input:{status:e}}}).catch((function(e){console.log(e)}))}}))};var P,k=(0,l.Ps)(P||(P=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  query GetMany($input: OrderGetManyInput) {\n    orders {\n      getMany(input: $input) {\n        pagination {\n          total\n        }\n        data {\n          products {\n            _id\n            product {\n              id\n              photo\n              name\n            }\n            quantity\n          }\n          status\n          id\n        }\n      }\n    }\n  }\n"]))),N=function(){var e=(0,c.v9)(s.u.getAccess),t=(0,o.aM)(k,{skip:!e,context:{headers:{authorization:"Bearer ".concat(e)}}}),n=t.data,a=t.loading,i=(0,r.useMemo)((function(){var e;return null!==(e=null==n?void 0:n.orders.getMany.data)&&void 0!==e?e:[]}),[n]),u=function(e){return{id:e._id,qty:e.quantity,product:{id:e.product.id,imgUrl:e.product.photo,title:e.product.name}}};return r.createElement("div",{className:"style-module_list-P4sPS"},i.map((function(e){return r.createElement(O,{key:e.id,order:{id:e.id,status:e.status,products:e.products.map(u)},isLoading:a})})))},j=function(){var e=(0,a.$G)().t;return r.createElement("main",null,r.createElement(i.W,null,r.createElement("h1",null,(0,u.o)(e("translation:orders")))),r.createElement(i.W,null,r.createElement(N,null)))}}}]);
//# sourceMappingURL=321.js.map